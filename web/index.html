<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RL Dungeon - 강화학습 던전</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>RL Dungeon</h1>
            <p class="subtitle">강화학습 던전 탐험</p>
        </header>

        <main>
            <div class="game-area">
                <canvas id="game-canvas"></canvas>

                <div class="dpad-container" id="dpad-container">
                    <div class="dpad">
                        <button class="dpad-btn dpad-up" data-action="0">&#9650;</button>
                        <button class="dpad-btn dpad-left" data-action="2">&#9664;</button>
                        <button class="dpad-btn dpad-center"></button>
                        <button class="dpad-btn dpad-right" data-action="3">&#9654;</button>
                        <button class="dpad-btn dpad-down" data-action="1">&#9660;</button>
                    </div>
                </div>

                <div class="game-ui">
                    <div class="stats">
                        <div class="stat">
                            <span class="stat-label">Gold</span>
                            <span class="stat-value gold-value" id="gold-text">100</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">HP</span>
                            <div class="hp-bar">
                                <div class="hp-fill" id="hp-fill"></div>
                            </div>
                            <span class="stat-value" id="hp-text">100/100</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Steps</span>
                            <span class="stat-value" id="steps-text">0</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Reward</span>
                            <span class="stat-value" id="reward-text">0.0</span>
                        </div>
                    </div>

                    <div class="message" id="message"></div>
                </div>
            </div>

            <div class="controls">
                <div class="control-section">
                    <h3>Character</h3>
                    <div class="character-select">
                        <button class="btn-character active" data-char="qkun">
                            Q군 (암기형)
                        </button>
                        <button class="btn-character" data-char="scout">
                            스카우트 (관찰형)
                        </button>
                    </div>
                    <p class="character-desc" id="character-desc">
                        좌표를 외워서 학습합니다. 던전별 전문가.
                    </p>
                </div>

                <div class="control-section">
                    <h3>Dungeon</h3>
                    <select id="dungeon-select">
                        <option value="level_01_easy">Lv.1 Tutorial</option>
                        <option value="level_02_trap">Lv.2 First Trap</option>
                        <option value="level_03_maze">Lv.3 Maze</option>
                        <option value="level_04_pit">Lv.4 Pit Danger</option>
                        <option value="level_05_gold">Lv.5 Gold Rush</option>
                        <option value="level_06_risk">Lv.6 Risk & Reward</option>
                        <option value="level_07_gauntlet">Lv.7 Gauntlet</option>
                        <option value="level_08_deadly">Lv.8 Deadly Maze</option>
                        <option value="level_09_treasure">Lv.9 Treasure Hunt</option>
                        <option value="level_10_final">Lv.10 Final</option>
                        <option value="level_11_hp_test">Lv.11 HP Test</option>
                        <option value="level_12_hp_gauntlet">Lv.12 HP Gauntlet</option>
                    </select>
                    <button id="btn-reset">Reset (R)</button>
                </div>

                <div class="control-section">
                    <h3>AI Training</h3>
                    <div class="speed-buttons" id="speed-buttons">
                        <span class="speed-label">Speed:</span>
                        <button class="btn-speed active" data-speed="1">1x</button>
                        <button class="btn-speed" data-speed="2">2x</button>
                        <button class="btn-speed" data-speed="3">3x</button>
                        <button class="btn-speed" data-speed="0">Instant</button>
                    </div>
                    <div class="train-mode-select">
                        <span class="speed-label">Mode:</span>
                        <select id="train-mode">
                            <option value="until_success">Until Success</option>
                            <option value="continuous">Continuous</option>
                        </select>
                    </div>
                    <div class="train-buttons">
                        <button id="btn-start-train" class="btn-train">Start Training</button>
                        <button id="btn-stop-train" class="btn-stop" disabled>Stop</button>
                    </div>
                    <div class="train-progress" id="train-progress" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-text" id="progress-text">0%</div>
                    </div>
                    <div class="train-stats" id="train-stats"></div>
                </div>

                <div class="control-section">
                    <h3>Game Mode</h3>
                    <label class="checkbox-label">
                        <input type="checkbox" id="fog-of-war" checked> Fog of War
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="sound-toggle" checked> Sound
                    </label>
                </div>

                <div class="control-section">
                    <h3>Visualization</h3>
                    <label class="checkbox-label">
                        <input type="checkbox" id="show-qvalues"> Show Q-Values
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="show-policy"> Show Policy
                    </label>
                </div>

                <div class="control-section">
                    <h3>Controls</h3>
                    <div class="key-hints">
                        <span class="key">↑↓←→</span> Move
                    </div>
                </div>

                <div class="control-section">
                    <h3>Legend</h3>
                    <div class="legend">
                        <div class="legend-item"><span class="tile-preview start"></span> Start</div>
                        <div class="legend-item"><span class="tile-preview goal"></span> Goal (+100)</div>
                        <div class="legend-item"><span class="tile-preview trap"></span> Trap (-10 HP)</div>
                        <div class="legend-item"><span class="tile-preview heal"></span> Heal (+10 HP)</div>
                        <div class="legend-item"><span class="tile-preview pit"></span> Pit (Instant Death)</div>
                        <div class="legend-item"><span class="tile-preview gold"></span> Gold (+10)</div>
                        <div class="legend-item"><span class="tile-preview monster"></span> Monster (-30 HP)</div>
                        <div class="legend-item"><span class="tile-preview wall"></span> Wall</div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>Arrow keys to move | R to reset | Reach the green goal!</p>
        </footer>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
